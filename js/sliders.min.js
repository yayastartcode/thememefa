/**
 * Sliders JavaScript for BeritaNih Theme - Responsive Fix
 */
(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){initHeroSlider();initEditorSlider();initCategorySlider();initCategorySlider2();initCategorySlider3();initCategoryTabs()});function getVisibleSlides(){if(window.innerWidth<768)return 1;if(window.innerWidth<1024)return 2;return 3}function initHeroSlider(){const slider=document.querySelector(".hero-slider-wrapper");const slides=document.querySelectorAll(".hero-slide");const nextBtn=document.querySelector(".hero-slider-nav.next");const prevBtn=document.querySelector(".hero-slider-nav.prev");const indicators=document.querySelectorAll(".hero-slider-indicator");console.log("Hero Slider elements found:",{slider:!!slider,slides:slides.length,nextBtn:!!nextBtn,prevBtn:!!prevBtn,indicators:indicators.length});if(!slider||slides.length===0){console.error("Hero slider elements not found");return}const originalSlideCount=window.heroSliderConfig?.originalSlideCount||4;const totalSlides=slides.length;let currentSlide=originalSlideCount;let isTransitioning=false;const viewport=document.querySelector(".hero-slider-viewport");const getSlideWidth=()=>slides[0]?.getBoundingClientRect().width||0;const getViewportWidth=()=>viewport?.getBoundingClientRect().width||0;let slideWidth=getSlideWidth();let viewportWidth=getViewportWidth();function getBaseOffset(){return Math.max((viewportWidth-slideWidth)/2,0)}function updateMeasurements(){slideWidth=getSlideWidth();viewportWidth=getViewportWidth()}function updateTransform(){const offset=currentSlide*slideWidth-getBaseOffset();slider.style.transform=`translateX(-${offset}px)`}window.addEventListener("resize",()=>{updateMeasurements();updateTransform()});function initSlider(){updateMeasurements();updateTransform();updateActiveSlide();console.log("Hero slider initialized at slide:",currentSlide)}function updateActiveSlide(){slides.forEach(slide=>slide.classList.remove("active"));if(slides[currentSlide]){slides[currentSlide].classList.add("active")}indicators.forEach(indicator=>{indicator.classList.remove("active");indicator.classList.remove("bg-white");indicator.classList.add("bg-gray-100")});const originalIndex=parseInt(slides[currentSlide]?.getAttribute("data-original"))||0;if(indicators[originalIndex]){indicators[originalIndex].classList.add("active");indicators[originalIndex].classList.add("bg-white");indicators[originalIndex].classList.remove("bg-gray-100")}}function moveToSlide(slideIndex,withTransition=true){if(isTransitioning)return;if(withTransition){isTransitioning=true;slider.style.transition="transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)"}else{slider.style.transition="none"}currentSlide=slideIndex;updateTransform();updateActiveSlide();if(withTransition){setTimeout(()=>{isTransitioning=false},600)}}function nextSlide(){if(isTransitioning)return;console.log("Next slide clicked, current:",currentSlide);const nextIndex=currentSlide+1;moveToSlide(nextIndex);setTimeout(()=>{if(currentSlide>=totalSlides-originalSlideCount){moveToSlide(originalSlideCount,false)}},600)}function prevSlide(){if(isTransitioning)return;console.log("Prev slide clicked, current:",currentSlide);const prevIndex=currentSlide-1;moveToSlide(prevIndex);setTimeout(()=>{if(currentSlide<originalSlideCount){moveToSlide(totalSlides-originalSlideCount-1,false)}},600)}function goToSlide(originalIndex){if(isTransitioning)return;console.log("Indicator clicked:",originalIndex);const targetSlide=originalSlideCount+originalIndex;moveToSlide(targetSlide)}if(nextBtn){nextBtn.addEventListener("click",(e)=>{e.preventDefault();nextSlide()});console.log("Hero next button listener added")}if(prevBtn){prevBtn.addEventListener("click",(e)=>{e.preventDefault();prevSlide()});console.log("Hero prev button listener added")}indicators.forEach((indicator,index)=>{indicator.addEventListener("click",(e)=>{e.preventDefault();goToSlide(index)})});console.log("Hero indicator listeners added:",indicators.length);let autoPlayInterval=setInterval(nextSlide,4000);const sliderSection=document.querySelector(".hero-slider-section");if(sliderSection){sliderSection.addEventListener("mouseenter",()=>{clearInterval(autoPlayInterval)});sliderSection.addEventListener("mouseleave",()=>{autoPlayInterval=setInterval(nextSlide,4000)})}let startX=0;let endX=0;if(slider){slider.addEventListener("touchstart",(e)=>{startX=e.touches[0].clientX});slider.addEventListener("touchend",(e)=>{endX=e.changedTouches[0].clientX;handleSwipe()})}function handleSwipe(){const swipeThreshold=50;const diff=startX-endX;if(Math.abs(diff)>swipeThreshold){if(diff>0){nextSlide()}else{prevSlide()}}}initSlider()}function initEditorSlider(){const editorSlider=document.getElementById("editorSlider");const editorSlides=document.querySelectorAll(".editor-slide");const editorNextBtn=document.getElementById("editorNext");const editorPrevBtn=document.getElementById("editorPrev");if(!editorSlider||editorSlides.length===0)return;const originalSlideCount=editorSlides.length;let currentIndex=0;let isTransitioning=false;function setupInfiniteSlider(){const slidesHTML=editorSlider.innerHTML;editorSlider.innerHTML=slidesHTML+slidesHTML+slidesHTML;currentIndex=originalSlideCount;updateSliderPosition(false)}function updateSliderPosition(withTransition=true){const allSlides=document.querySelectorAll(".editor-slide");const slideWidth=allSlides[0]?.offsetWidth||0;const gap=window.innerWidth>=768?24:16;const offset=currentIndex*(slideWidth+gap);if(withTransition){editorSlider.style.transition="transform 0.5s ease-in-out"}else{editorSlider.style.transition="none"}editorSlider.style.transform=`translateX(-${offset}px)`}function nextSlide(){if(isTransitioning)return;isTransitioning=true;currentIndex++;updateSliderPosition(true);setTimeout(()=>{const allSlides=document.querySelectorAll(".editor-slide");if(currentIndex>=originalSlideCount*2){currentIndex=originalSlideCount;updateSliderPosition(false)}isTransitioning=false},500)}function prevSlide(){if(isTransitioning)return;isTransitioning=true;currentIndex--;updateSliderPosition(true);setTimeout(()=>{if(currentIndex<originalSlideCount){currentIndex=originalSlideCount*2-1;updateSliderPosition(false)}isTransitioning=false},500)}if(editorNextBtn){editorNextBtn.addEventListener("click",nextSlide)}if(editorPrevBtn){editorPrevBtn.addEventListener("click",prevSlide)}let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){updateSliderPosition(false)},250)});let touchStartX=0;let touchEndX=0;editorSlider.addEventListener("touchstart",(e)=>{touchStartX=e.touches[0].clientX});editorSlider.addEventListener("touchend",(e)=>{touchEndX=e.changedTouches[0].clientX;handleSwipe()});function handleSwipe(){const swipeThreshold=50;const diff=touchStartX-touchEndX;if(Math.abs(diff)>swipeThreshold){if(diff>0){nextSlide()}else{prevSlide()}}}setupInfiniteSlider()}function initCategorySlider(){const categorySlider=document.getElementById("categorySlider");const categorySlides=document.querySelectorAll(".category-slide");const categoryNextBtn=document.getElementById("categoryNext");const categoryPrevBtn=document.getElementById("categoryPrev");if(!categorySlider||categorySlides.length===0)return;const totalSlides=categorySlides.length;let currentIndex=0;let isTransitioning=false;function getMaxIndex(){const visibleSlides=getVisibleSlides();return Math.max(0,totalSlides-visibleSlides)}function updateSliderPosition(withTransition=true){const slideWidth=categorySlides[0]?.offsetWidth||0;const gap=16;const offset=currentIndex*(slideWidth+gap);if(withTransition){categorySlider.style.transition="transform 0.5s ease-in-out"}else{categorySlider.style.transition="none"}categorySlider.style.transform=`translateX(-${offset}px)`}function updateNavigationButtons(){const maxIndex=getMaxIndex();if(categoryPrevBtn){categoryPrevBtn.style.opacity=currentIndex===0?"0.5":"1";categoryPrevBtn.disabled=currentIndex===0}if(categoryNextBtn){categoryNextBtn.style.opacity=currentIndex>=maxIndex?"0.5":"1";categoryNextBtn.disabled=currentIndex>=maxIndex}}function nextSlide(){const maxIndex=getMaxIndex();if(isTransitioning||currentIndex>=maxIndex)return;isTransitioning=true;currentIndex++;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}function prevSlide(){if(isTransitioning||currentIndex<=0)return;isTransitioning=true;currentIndex--;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}if(categoryNextBtn){categoryNextBtn.addEventListener("click",nextSlide)}if(categoryPrevBtn){categoryPrevBtn.addEventListener("click",prevSlide)}let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){currentIndex=0;updateSliderPosition(false);updateNavigationButtons()},250)});let touchStartX=0;let touchEndX=0;categorySlider.addEventListener("touchstart",(e)=>{touchStartX=e.touches[0].clientX});categorySlider.addEventListener("touchend",(e)=>{touchEndX=e.changedTouches[0].clientX;handleSwipe()});function handleSwipe(){const swipeThreshold=50;const diff=touchStartX-touchEndX;if(Math.abs(diff)>swipeThreshold){if(diff>0){nextSlide()}else{prevSlide()}}}updateSliderPosition(false);updateNavigationButtons()}function initCategorySlider2(){const categorySlider=document.getElementById("category2Slider");const categorySlides=document.querySelectorAll("#category2Slider .category-slide");const categoryNextBtn=document.getElementById("category2Next");const categoryPrevBtn=document.getElementById("category2Prev");if(!categorySlider||categorySlides.length===0)return;const totalSlides=categorySlides.length;let currentIndex=0;let isTransitioning=false;function getMaxIndex(){const visibleSlides=getVisibleSlides();return Math.max(0,totalSlides-visibleSlides)}function updateSliderPosition(withTransition=true){const slideWidth=categorySlides[0]?.offsetWidth||0;const gap=16;const offset=currentIndex*(slideWidth+gap);if(withTransition){categorySlider.style.transition="transform 0.5s ease-in-out"}else{categorySlider.style.transition="none"}categorySlider.style.transform=`translateX(-${offset}px)`}function updateNavigationButtons(){const maxIndex=getMaxIndex();if(categoryPrevBtn){categoryPrevBtn.style.opacity=currentIndex===0?"0.5":"1";categoryPrevBtn.disabled=currentIndex===0}if(categoryNextBtn){categoryNextBtn.style.opacity=currentIndex>=maxIndex?"0.5":"1";categoryNextBtn.disabled=currentIndex>=maxIndex}}function nextSlide(){const maxIndex=getMaxIndex();if(isTransitioning||currentIndex>=maxIndex)return;isTransitioning=true;currentIndex++;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}function prevSlide(){if(isTransitioning||currentIndex<=0)return;isTransitioning=true;currentIndex--;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}if(categoryNextBtn){categoryNextBtn.addEventListener("click",nextSlide)}if(categoryPrevBtn){categoryPrevBtn.addEventListener("click",prevSlide)}let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){currentIndex=0;updateSliderPosition(false);updateNavigationButtons()},250)});let touchStartX=0;let touchEndX=0;categorySlider.addEventListener("touchstart",(e)=>{touchStartX=e.touches[0].clientX});categorySlider.addEventListener("touchend",(e)=>{touchEndX=e.changedTouches[0].clientX;handleSwipe()});function handleSwipe(){const swipeThreshold=50;const diff=touchStartX-touchEndX;if(Math.abs(diff)>swipeThreshold){if(diff>0){nextSlide()}else{prevSlide()}}}updateSliderPosition(false);updateNavigationButtons()}function initCategorySlider3(){const categorySlider=document.getElementById("category3Slider");const categorySlides=document.querySelectorAll("#category3Slider .category-slide");const categoryNextBtn=document.getElementById("category3Next");const categoryPrevBtn=document.getElementById("category3Prev");if(!categorySlider||categorySlides.length===0)return;const totalSlides=categorySlides.length;let currentIndex=0;let isTransitioning=false;function getMaxIndex(){const visibleSlides=getVisibleSlides();return Math.max(0,totalSlides-visibleSlides)}function updateSliderPosition(withTransition=true){const slideWidth=categorySlides[0]?.offsetWidth||0;const gap=16;const offset=currentIndex*(slideWidth+gap);if(withTransition){categorySlider.style.transition="transform 0.5s ease-in-out"}else{categorySlider.style.transition="none"}categorySlider.style.transform=`translateX(-${offset}px)`}function updateNavigationButtons(){const maxIndex=getMaxIndex();if(categoryPrevBtn){categoryPrevBtn.style.opacity=currentIndex===0?"0.5":"1";categoryPrevBtn.disabled=currentIndex===0}if(categoryNextBtn){categoryNextBtn.style.opacity=currentIndex>=maxIndex?"0.5":"1";categoryNextBtn.disabled=currentIndex>=maxIndex}}function nextSlide(){const maxIndex=getMaxIndex();if(isTransitioning||currentIndex>=maxIndex)return;isTransitioning=true;currentIndex++;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}function prevSlide(){if(isTransitioning||currentIndex<=0)return;isTransitioning=true;currentIndex--;updateSliderPosition(true);updateNavigationButtons();setTimeout(()=>{isTransitioning=false},500)}if(categoryNextBtn){categoryNextBtn.addEventListener("click",nextSlide)}if(categoryPrevBtn){categoryPrevBtn.addEventListener("click",prevSlide)}let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){currentIndex=0;updateSliderPosition(false);updateNavigationButtons()},250)});let touchStartX=0;let touchEndX=0;categorySlider.addEventListener("touchstart",(e)=>{touchStartX=e.touches[0].clientX});categorySlider.addEventListener("touchend",(e)=>{touchEndX=e.changedTouches[0].clientX;handleSwipe()});function handleSwipe(){const swipeThreshold=50;const diff=touchStartX-touchEndX;if(Math.abs(diff)>swipeThreshold){if(diff>0){nextSlide()}else{prevSlide()}}}updateSliderPosition(false);updateNavigationButtons()}function initCategoryTabs(){const categoryTabs=document.querySelectorAll(".category-tab");const categoryPostsContainers=document.querySelectorAll(".category-posts");if(categoryTabs.length===0||categoryPostsContainers.length===0)return;categoryTabs.forEach(tab=>{tab.addEventListener("click",function(e){e.preventDefault();const categoryId=this.getAttribute("data-category");categoryTabs.forEach(t=>{t.classList.remove("bg-red-600","text-white");t.classList.add("bg-gray-100","text-gray-700","hover:bg-gray-200")});this.classList.remove("bg-gray-100","text-gray-700","hover:bg-gray-200");this.classList.add("bg-red-600","text-white");categoryPostsContainers.forEach(container=>{if(container.getAttribute("data-category")===categoryId){container.classList.remove("hidden")}else{container.classList.add("hidden")}})})})}})();